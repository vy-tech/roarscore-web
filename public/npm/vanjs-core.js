/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/vanjs-core@1.5.5/src/van.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
let e,t,r,s,l,n,o=Object.getPrototypeOf,a={isConnected:1},i={},d=o(a),_=o(o),f=(e,t,r,s)=>(e??(setTimeout(r,s),new Set)).add(t),h=(e,t,s)=>{let l=r;r=t;try{return e(s)}catch(e){return console.error(e),s}finally{r=l}},g=e=>e.filter((e=>e._dom?.isConnected)),w=e=>l=f(l,e,(()=>{for(let e of l)e._bindings=g(e._bindings),e._listeners=g(e._listeners);l=n}),1e3),m={get val(){return r?._getters?.add(this),this.rawVal},get oldVal(){return r?._getters?.add(this),this._oldVal},set val(s){r?._setters?.add(this),s!==this.rawVal&&(this.rawVal=s,this._bindings.length+this._listeners.length?(t?.add(this),e=f(e,this,y)):this._oldVal=s)}},u=e=>({__proto__:m,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),c=(e,t)=>{let r={_getters:new Set,_setters:new Set},l={f:e},n=s;s=[];let o=h(e,r,t);o=(o??document).nodeType?o:new Text(o);for(let e of r._getters)r._setters.has(e)||(w(e),e._bindings.push(l));for(let e of s)e._dom=o;return s=n,l._dom=o},V=(e,t=u(),r)=>{let l={_getters:new Set,_setters:new Set},n={f:e,s:t};n._dom=r??s?.push(n)??a,t.val=h(e,l,t.rawVal);for(let e of l._getters)l._setters.has(e)||(w(e),e._listeners.push(n));return t},b=(e,...t)=>{for(let r of t.flat(1/0)){let t=o(r??0),s=t===m?c((()=>r.val)):t===_?c(r):r;s!=n&&e.append(s)}return e},p=(e,t,...r)=>{let[{is:s,...l},...a]=o(r[0]??0)===d?r:[{},...r],f=e?document.createElementNS(e,t,{is:s}):document.createElement(t,{is:s});for(let[e,r]of Object.entries(l)){let s=t=>t?Object.getOwnPropertyDescriptor(t,e)??s(o(t)):n,l=t+","+e,a=i[l]??=s(o(f))?.set??0,d=e.startsWith("on")?(t,r)=>{let s=e.slice(2);f.removeEventListener(s,r),f.addEventListener(s,t)}:a?a.bind(f):f.setAttribute.bind(f,e),h=o(r??0);e.startsWith("on")||h===_&&(r=V(r),h=m),h===m?c((()=>(d(r.val,r._oldVal),f))):d(r)}return b(f,a)},v=e=>({get:(t,r)=>p.bind(n,e,r)}),S=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),y=()=>{let r=0,s=[...e].filter((e=>e.rawVal!==e._oldVal));do{t=new Set;for(let e of new Set(s.flatMap((e=>e._listeners=g(e._listeners)))))V(e.f,e.s,e._dom),e._dom=n}while(++r<100&&(s=[...t]).length);let l=[...e].filter((e=>e.rawVal!==e._oldVal));e=n;for(let e of new Set(l.flatMap((e=>e._bindings=g(e._bindings)))))S(e._dom,c(e.f,e._dom)),e._dom=n;for(let e of l)e._oldVal=e.rawVal};var O={tags:new Proxy((e=>new Proxy(p,v(e))),v()),hydrate:(e,t)=>S(e,c(t,e)),add:b,state:u,derive:V};export{O as default};
//# sourceMappingURL=/sm/ae55d9fa8fa7d3c89e5d80c002c305cfdb8aa5437ced68a0ef60e2844bc08a40.map